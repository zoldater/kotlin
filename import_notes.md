# Заметки по резолверу импортов для декомпилятора Kotlin IR

## График реализации

30.10 - object, companion object, nested class
31.10 - inner classes, anonymous inner class by `val x = object {...}` (аргумент метода, к-тора)
01.11 - with, касты as, as?, typeAlias функциональных типов
02.11 - делегирование, кастомные геттер/сеттер
03.11 - Собирать декларации

## Что импортируется в котлине

* Классы, в том числе nested
* object'ы, в том числе nested
* имена мемберов object'ов и companion object'ов
* EnumEntry
* typealias'ы
* **Как импортируются top-level функции (в т.ч. extension), val и const val? "$PackageName".funName?**

## Особенности реализации

Протаскиваем в data стринговый префикс текущего скоупа:

* в IrFile - fqName
* заходя в декларацию класса, Enum или именованного object'а добавляем через "." его имя и используем в качестве префикса для обхода мемберов 

1) Собираем информацию о декларациях в данном файле в коллекцию - HashSet:
   1) из ноды IrClass - кладем в хранилище имя этого класса, далее с префиксом все nested классы, enum'ы и object
   2) из ноды мембера - 
   3) из ноды TypeAlias - о Abbreviation
   4) из ноды EnumEntry - имя этого Entry c префиксом из скоупа выше
2) Собираем информацию в местах вызова:
   1) конструкторов классов/EnumEntry - о полном имени класса, EnumEntry, кладем в хранилище импортов  
   2) мемберов object'ов (_возможно еще top-level_) - о имени мембера с учетом префикса, кладем в хранилище импортов
   3)  